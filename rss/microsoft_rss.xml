<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:slash="http://purl.org/rss/1.0/modules/slash/" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:wfw="http://wellformedweb.org/CommentAPI/"><channel><title>微软研究院博客 - 微软研究院</title><atom:link href="https://www.microsoft.com/en-us/research/blog/feed/?from=https%3A%2F%2Fresearch.microsoft.com%2Frss%2Fnews.xml&amp;type=rss" rel="self" type="application/rss+xml"></atom:link><link/> https://www.microsoft.com/en-us/research/blog/<description></description><lastbuilddate> 2024 年 11 月 15 日星期五 17:43:53 +0000</lastbuilddate><language> en-US</language><sy:updateperiod>每小时</sy:updateperiod><sy:updatefrequency>1</sy:updatefrequency><generator> https://wordpress.org/?v=6.6.2</generator><item><title> GraphRAG：通过动态社区选择改进全局搜索</title><link/>https://www.microsoft.com/en-us/research/blog/graphrag-improving-global-search-via-dynamic-community-selection/<dc:creator><![CDATA[Brenda Potts]]></dc:creator><pubDate> Fri, 15 Nov 2024 16:52:47 +0000</pubDate><category><![CDATA[Research Blog]]></category><guid ispermalink="false"> https://www.microsoft.com/en-us/research/?p=1101987 </guid><description><![CDATA[<p>检索增强生成 (RAG) 有助于人工智能系统在生成对用户查询的响应时向大型语言模型 (LLM) 提供更多信息。一种进行“全局”查询的新方法可以优化 GraphRAG 中全局搜索的性能。</p><p> <a href="https://www.microsoft.com/en-us/research/blog/graphrag-improving-global-search-via-dynamic-community-selection/">GraphRAG：通过动态社区选择改进全局搜索</a>一文首先出现在<a href="https://www.microsoft.com/en-us/research">Microsoft Research</a>上。</p> ]]>; </description><content:encoded><![CDATA[
<figure class="wp-block-image size-full"><img fetchpriority="high" decoding="async" width="1400" height="788" src="https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-Global-Search-BlogHeroFeature-1400x788-1.jpg" alt="该图像在渐变背景上具有三个白色图标，从左侧的蓝色过渡到右侧的绿色。第一个图标位于左侧，描绘了类似于带有连接方块的工作流程的分层结构。中间的图标代表 GraphRAG（互连的节点和线）。右侧的第三个图标显示了一个地球仪，上面覆盖着一个放大镜，象征着全球搜索。" class="wp-image-1102437" srcset="https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-Global-Search-BlogHeroFeature-1400x788-1.jpg 1400w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-Global-Search-BlogHeroFeature-1400x788-1-300x169.jpg 300w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-Global-Search-BlogHeroFeature-1400x788-1-1024x576.jpg 1024w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-Global-Search-BlogHeroFeature-1400x788-1-768x432.jpg 768w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-Global-Search-BlogHeroFeature-1400x788-1-1066x600.jpg 1066w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-Global-Search-BlogHeroFeature-1400x788-1-655x368.jpg 655w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-Global-Search-BlogHeroFeature-1400x788-1-240x135.jpg 240w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-Global-Search-BlogHeroFeature-1400x788-1-640x360.jpg 640w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-Global-Search-BlogHeroFeature-1400x788-1-960x540.jpg 960w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-Global-Search-BlogHeroFeature-1400x788-1-1280x720.jpg 1280w" sizes="(max-width: 1400px) 100vw, 1400px" /></figure><p>检索增强生成 (RAG) 允许人工智能系统在生成对用户查询的响应时向大型语言模型 (LLM) 提供附加信息和上下文。然而，传统的基于 RAG 的方法可能很难检索需要整个数据集的高级知识的信息，尤其是对于抽象和全局问题，例如无关键字查询：“了解最近两周的更新情况”。这些类型的查询被称为“全局”查询，因为它们需要对数据集的整体理解才能回答问题。 <a href="https://www.microsoft.com/en-us/research/blog/graphrag-unlocking-llm-discovery-on-narrative-private-data/" target="_blank" rel="noreferrer noopener">GraphRAG</a>旨在通过两个主要步骤解决这些问题：索引和查询。索引引擎首先将文本文档集合分解为片段，然后将这些片段聚集成分层社区，其中实体和关系通过更高级别的抽象将每个片段连接起来。然后，我们使用法学硕士生成每个社区的摘要，称为社区报告。因此，索引引擎创建数据集的分层知识图，分层结构中的每个级别代表原始材料的不同抽象和摘要级别。在查询步骤中，GraphRAG 使用这种结构化知识为 LLM 提供额外的上下文，以帮助回答问题。在这篇博文中，我们展示了一种进行“全局”查询的新方法，该方法有效地利用知识图表示并优化 GraphRAG 中全局搜索的性能。</p><h2 class="wp-block-heading" id="static-vs-dynamic-global-search">静态与动态全局搜索</h2><p>GraphRAG 中的<a class="msr-external-link glyph-append glyph-append-open-in-new-tab glyph-append-xsmall" href="https://microsoft.github.io/graphrag/query/global_search/" target="_blank" rel="noreferrer noopener">全局搜索<span class="sr-only">（在新选项卡中打开）</span></a>算法旨在回答需要了解整个数据集的抽象问题。它通过在知识图中预定级别搜索社区来生成答案。然后，法学硕士在这个抽象级别上结合并总结了所有社区报告。最后，摘要用作法学硕士的附加上下文，以生成对用户问题的响应。这个映射缩减过程允许法学硕士从所有社区报告中选择相关文本以生成最终答案。这种静态方法既昂贵又低效，因为它包含许多对用户查询没有信息的较低级别的报告。由于所有社区报告（尤其是高层报告）不太可能与回答查询相关，因此非常需要一种在资源密集型映射缩减操作之前首先考虑报告相关性的方法。</p><p>在这里，我们将动态社区选择引入全局搜索算法，该算法利用索引数据集的知识图结构。从知识图谱的根部开始，我们使用法学硕士来评估社区报告在回答用户问题时的相关性。如果报告被认为不相关，我们只需从搜索过程中删除它及其节点（或子社区）。另一方面，如果报告被认为是相关的，我们就会向下遍历其子节点并重复该操作。最后，仅将相关报告传递给 Map-Reduce 操作以生成对用户的响应。图 1 说明了动态社区选择过程的实际应用。 </p><figure class="wp-block-image aligncenter size-full"><img decoding="async" width="1400" height="517" src="https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-global-dynamics_Figure-1.png" alt="显示全局搜索中动态社区选择工作流程的图像。每个节点图示一个社区报告，箭头表示速率操作。" class="wp-image-1101996" srcset="https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-global-dynamics_Figure-1.png 1400w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-global-dynamics_Figure-1-300x111.png 300w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-global-dynamics_Figure-1-1024x378.png 1024w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-global-dynamics_Figure-1-768x284.png 768w, https://www.microsoft.com/en-us/research/uploads/prod/2024/11/GraphRAG-global-dynamics_Figure-1-240x89.png 240w" sizes="(max-width: 1400px) 100vw, 1400px" /><figcaption class="wp-element-caption">图 1：动态社区选择工作流程</figcaption></figure><p>动态全局搜索方法有两个主要好处。首先，它尽早修剪不相关的报告，从而减少映射缩减操作中要考虑的社区报告的总数。其次，它使用户能够搜索整个知识图谱，而不是预先定义静态的社区级别，并且可以得到更详细的答案。这使得它能够收集不同抽象级别的信息。此外，评级操作是一个分类问题，比摘要和文本生成更容易执行，因此可以使用不太复杂的模型。在我们利用 OpenAI 模型的实验中，GPT-4o-mini 评估器实现了与 GPT-4o 评估器非常相似的检索率，而运行成本和时间仅为其一小部分。总体而言，我们在速率操作中使用更小且更具成本效益的模型 GPT-4o-mini 来修剪任何不相关的社区报告，然后我们使用 GPT-4o 执行 map-reduce 操作以生成最终响应。</p><h2 class="wp-block-heading" id="dynamic-community-selection-on-the-ap-news-dataset">美联社新闻数据集上的动态社区选择</h2><p>为了证明动态全局搜索在保持相似响应质量的同时带来的成本节省，我们在美联社新闻的数据集上并排评估了这两种方法。我们测试了 50 个全局问题的静态和动态搜索，并使用法学硕士评估器评估了最终的回答质量。此外，我们还比较了两种方法的总代币成本。为了直接比较这两种方法，我们限制了动态全局搜索的最大搜索深度，以便两种方法使用相同的基础信息。</p><p>我们使用 LLM 评估器来选择 3 个关键指标的最佳响应（即胜率）：</p><ul class="wp-block-list"><li>全面性：答案提供了多少细节来涵盖问题的所有方面和细节？</li><li>多样性：对问题提供不同观点和见解的答案有多多样化和丰富？</li><li>授权：答案如何帮助读者理解该主题并做出明智的判断？ </li></ul><div class="border-bottom border-top border-gray-300 mt-5 mb-5 msr-promo text-center text-md-left alignwide" data-bi-aN="promo" data-bi-id="1085496"><p class="msr-promo__label text-gray-800 text-center text-uppercase"><span class="px-4 bg-white display-inline-block font-weight-semibold small">焦点：博客文章</span></p><div class="row pt-3 pb-4 align-items-center"><div class="msr-promo__media col-12 col-md-5"> <a class="bg-gray-300" href="https://www.microsoft.com/en-us/research/blog/eureka-evaluating-and-understanding-progress-in-ai/" aria-label="Eureka: Evaluating and understanding progress in AI" data-bi-cN="Eureka: Evaluating and understanding progress in AI" target="_blank"><img decoding="async" class="w-100 display-block" src="https://www.microsoft.com/en-us/research/uploads/prod/2024/09/NEWEureka-2024-BlogHeroFeature-1400x788-1-66e90c195464d.jpg" alt="代表尤里卡实验管道的白色图标——PromptProcessing、Inference、PromptProcessing、Inference、DataProcessing、EvalReporting——在蓝色到绿色的渐变背景上。" /></a></div><div class="msr-promo__content p-3 px-5 col-12 col-md"><h2 class="h4"> Eureka：评估和理解人工智能的进展</h2><p class="large">我们如何严格评估和理解人工智能的最新进展？ Eureka 是一个开源框架，用于标准化大型基础模型的评估，超越单分报告和排名。了解有关扩展发现的更多信息。 </p><div class="wp-block-buttons justify-content-center justify-content-md-start"><div class="wp-block-button"> <a href="https://www.microsoft.com/en-us/research/blog/eureka-evaluating-and-understanding-progress-in-ai/" class="btn btn-brand glyph-append glyph-append-chevron-right" aria-label="Read more" data-bi-cN="Eureka: Evaluating and understanding progress in AI" target="_blank">阅读更多</a></div></div></div><!--/.msr-promo__content--></div><!--/.msr-promo__inner-wrap--><span id="label-external-link" class="sr-only" aria-hidden="true">在新选项卡中打开</span></div><!--/.msr-promo--><h2 class="wp-block-heading" id="significant-cost-reduction-while-maintaining-output-quality">显着降低成本，同时保持输出质量</h2><p>动态社区选择生成的响应质量与其静态对应物相当，同时降低了总代币成本。我们的法学硕士评估表明，这两种方法在美联社新闻数据集的 50 个全局问题的三个关键指标中的输出质量相似，并且它们之间没有统计显着性。更重要的是，我们观察到使用新方法时总代币成本显着降低，与社区级别 1 现有的静态全局搜索相比<strong>，平均成本降低了 77%。</strong>这是由于通过评级过程，因此在映射-归约操作中需要更少的提示和输出标记。例如，现有的静态全局搜索方法在map-reduce操作中处理大约1500个1级社区报告，而在动态搜索中平均只选择470个社区报告来生成最终答案。</p><p>此外，如果我们允许动态搜索继续将评级过程进一步深入到更深层次的社区报告，我们会观察到其最终响应的改进。在这里，我们进行了相同的实验，但允许动态搜索持续到社区级别 3。在 50 个全局问题中，29 个包含的社区报告比我们的静态搜索基线更多，这表明一些更深级别的社区报告与用户问题相关。事实上，我们观察到综合性和授权方面都有适度且具有统计显着性的改善。  使用 LLM 评估器对响应对进行评分，我们观察到动态全局搜索相对于第 1 级静态搜索的胜率分别为 58% 和 60%。尽管如此，虽然评级操作是由较小的模型执行的，因此尽管引起的成本可以忽略不计，但由于地图归约操作处理的社区报告数量增加，它仍然可能导致更高的总体成本。在此实验中，第 3 级动态搜索的总成本平均高出 34%。表 1 总结了第 1 级静态搜索与第 1 级和第 3 级动态搜索的结果。 </p><table width="100%" align="center" border="1" font-size="80%" cellpadding="3px"><tr><td rowspan="2">动态搜索</td><td rowspan="2" style="text-align: center;">编号。查询</td><td colspan="3" style="text-align: center;">静态搜索胜率（1 级）</td><td rowspan="2" style="text-align: center;">相对成本</td></tr><tr><td style="text-align: center;">综合性</td><td style="text-align: center;">多样性</td><td style="text-align: center;">赋权</td></tr><tr><td>1级</td><td style="text-align: center;">50</td><td style="text-align: center; background-color: #eeeeee;"> 49.5%</td><td style="text-align: center; background-color: #eeeeee;"> 46.0%</td><td style="text-align: center; background-color: #eeeeee;"> 48.0%</td><td style="text-align: center;"> -77%</td></tr><tr><td> 3级</td><td style="text-align: center;">29*</td><td style="text-align: center; background-color: #8de971;"> 58.8%</td><td style="text-align: center; background-color: #eeeeee;"> 48.0%</td><td style="text-align: center; background-color: #8de971;"> 60.0%</td><td style="text-align: center;"> +34% </td></tr></table><div style="height:10px" aria-hidden="true" class="wp-block-spacer"></div><p class="has-text-align-center">表 1. LLM 在不同社区级别对全局问题的动态搜索与静态搜索的评估。我们显示了第 1 级和第 3 级动态搜索相对于第 1 级静态搜索的获胜率，即 LLM 评估者更喜欢动态搜索生成的响应而不是静态搜索的次数。绿色背景表示胜率具有统计显着性，灰色背景表示不显着。最右边的列显示了针对第 1 级静态搜索的平均相对令牌成本。 * 请注意，我们仅评估社区第 3 级动态搜索的答案，其中包含比第 1 级静态搜索更多的社区报告。</p><p>总体而言，动态社区选择实现了 77% 的成本降低，同时实现了与基线静态方法类似的输出质量。这些数字看起来很有希望，但结果质量如何呢？让我们通过一个例子来进行一些直接的并排比较：</p><h2 class="wp-block-heading" id="comparable-response-quality-and-detail">类似的响应质量和细节</h2><table width="100%" align="center" border="1" font-size="80%" cellpadding="12px"><tr><td colspan="2">查询：在整个数据集中，描述主要疾病疫苗接种率的共同趋势。</td></tr><tr style="vertical-align: top;"><td> 1 级静态全局搜索</td><td>具有第 3 级动态社区选择的全局搜索</td></tr><tr style="vertical-align: top;"><td><p>### 主要疾病疫苗接种率的常见趋势</p><p>#### 疫苗接种率下降</p><p>各地区观察到的一个显着趋势是主要疾病疫苗接种率下降。例如，明尼苏达州的免疫率下降，导致最近爆发麻疹[数据：报告（335）]。同样，COVID-19 大流行加剧了这一问题，导致密歇根州和其他地区的儿童免疫接种率下降 [数据：报告 (1231, 915)]。这种下降通常归因于有关疫苗的错误信息，特别是将 MMR 疫苗与自闭症联系起来的错误说法[数据：报告 (912, 1335)]。</p><p> #### COVID-19 的影响</p>COVID-19 大流行对疫苗接种率产生了深远影响。努力提高 COVID-19 疫苗接种率一直是公共卫生政策的主要重点，但大流行也导致儿童常规疫苗接种率下降 [数据：报告 (920, 194)]。这一流行病影响了公众对卫生措施和疫苗接种的态度，导致更广泛的公共卫生挑战[数据：报告（920）]。</p><p> #### 地区差异</p><p>疫苗接种率因地区而异。例如，西弗吉尼亚州拥有美国最严格的学校疫苗接种政策之一，导致儿童免疫率很高[数据：报告（1199）]。相比之下，爱达荷州的儿童疫苗接种总体豁免率是美国最高的，构成了重大的公共卫生风险[数据：报告（998）]。伊利诺伊州面临学校疫苗接种率低的挑战，导致麻疹爆发[数据：报告 (108, 82)]。</p><p> #### 公共卫生举措</p><p>已经实施了各种公共卫生举措来解决疫苗接种率问题。 CDC 在监测和报告麻疹、腮腺炎和脊髓灰质炎等疾病的疫苗接种率方面发挥着至关重要的作用，并提供有关可预防疾病的重要信息 [数据：报告 (914)]。西弗吉尼亚州的“Do It For Babydog”抽奖活动等项目鼓励居民接种疫苗[数据：报告 (1199)]。此外，比尔及梅琳达·盖茨基金会积极参与资助和支持针对脊髓灰质炎、疟疾、艾滋病毒和霍乱等主要疾病的疫苗接种计划[数据：报告 (1091)]。</p><p> ＃＃＃ 结论</p><p>该数据集揭示了受区域政策、公共卫生举措和 COVID-19 大流行影响影响的疫苗接种率的复杂情况。虽然一些地区通过严格的政策和公共卫生运动设法保持了高疫苗接种率，但其他地区则因错误信息和豁免率而面临重大挑战。全球努力和合作对于应对这些挑战和提高全球疫苗接种覆盖率仍然至关重要。</p></td><td><p> ### 主要疾病疫苗接种率的常见趋势</p><p>#### 疫苗接种率下降</p><p>整个数据集中观察到的一个显着趋势是各种疾病的疫苗接种率下降，包括麻疹、腮腺炎、风疹 (MMR) 和脊髓灰质炎。<b>这种下降在美国幼儿园中尤为明显，疫苗接种覆盖率从2019-2020学年的95.2%下降到2022-2023学年的93.1%</b> 。这一减少低于实现群体免疫所需的 95% 阈值，每年使大约 250,000 名幼儿园儿童面临风险[数据：报告（5668、15469、15703、15481、15471，+更多）]。</p><p> #### COVID-19 大流行的影响</p><p>COVID-19 大流行对疫苗接种率产生了深远影响。推广 COVID-19 疫苗接种的努力一直是一个主要焦点，密歇根州和伊利诺伊州等地区的举措为学生提供免费餐点并推广更新的 COVID-19 疫苗 [数据：报告 (19125, 15466)]。然而，这一流行病也扰乱了常规疫苗接种计划，导致麻疹等疾病的覆盖率降低，并导致最近的疫情爆发[数据：报告（15464、15674、15482、15481，+更多）]。</p><p> #### 地区差异和立法措施</p><p>美国各地的疫苗接种率和豁免率存在显着的地区差异。例如，西弗吉尼亚州对入学儿童实施了严格的免疫要求，导致儿童免疫率较高[数据：报告（5674, 18874, 18899）]。相比之下，明尼苏达州和伊利诺伊州等州的非医疗豁免有所增加，导致疫苗接种率降低和最近的疫情爆发[数据：报告（15483、15481、108、2705，+更多）]。</p><p> #### 提高疫苗接种率的努力</p><p>已经采取了各种举措和立法措施来解决疫苗接种率下降的问题。例如，信德省政府提出了一项脊髓灰质炎疫苗接种法案，其中包括对不给孩子接种疫苗的父母进行监禁的条款[数据：报告（15398）]。在美国，CDC 建议 6 个月及以上的所有人接种新的 COVID-19 疫苗，并启动了确保公平获得疫苗的举措，特别是在发展中国家 [数据：报告 (15847, 15571, 15691, 15694, +更多)]。</p><p> ＃＃＃ 结论</p><p>该数据集揭示了受 COVID-19 大流行、疫苗犹豫、错误信息和地区差异影响的疫苗接种率的复杂情况。虽然提高疫苗接种率的努力仍在继续，但免疫覆盖率的下降带来了重大的公共卫生风险，凸显出需要持续保持警惕并采取积极措施，以确保高疫苗接种率并防止疫苗可预防疾病的爆发。 </p></td></tr></table><div style="height:10px" aria-hidden="true" class="wp-block-spacer"></div><p class="has-text-align-center">表 2. 通过静态搜索（级别 1）和动态搜索（级别 3）对美联社新闻数据集上的同一全局问题生成的响应。</p><p>表 2 显示了针对同一问题的第 1 级静态搜索和第 3 级动态搜索的示例输出。虽然这两个输出包含类似的高级主题，但动态搜索的响应提供了具体数据，例如某些人群的疫苗接种率下降。我们还注意到，动态搜索的响应明显更多地引用了源材料，如文本中的“[数据报告]”所示。通过选择性地提供与问题相关的信息，这减轻了映射缩减操作必须一次过滤和处理所有社区报告的负担，因此它可以生成更全面且针对用户问题的响应。</p><p>总体而言，动态社区选择提出了一种替代方法，通过利用索引知识图并在速率相关性操作中使用更便宜的 LLM 模型，在 GraphRAG 中执行全局搜索。这些变化降低了总代币成本，并可能改善响应细节和质量。</p><h2 class="wp-block-heading" id="availability">可用性</h2><div class="annotations " data-bi-aN="margin-callout"><ul class="annotations__list card depth-16 bg-body p-4 annotations__list--right"><li class="annotations__list-item"> <span class="annotations__type d-block text-uppercase font-weight-semibold text-neutral-300 small">博客</span><a href="https://www.microsoft.com/en-us/research/blog/introducing-drift-search-combining-global-and-local-search-methods-to-improve-quality-and-efficiency/" target="_self" class="annotations__link font-weight-semibold text-decoration-none" data-bi-type="annotated-link" aria-label="Introducing DRIFT Search: Combining global and local search methods to improve quality and efficiency" data-bi-aN="margin-callout" data-bi-cN="Introducing DRIFT Search: Combining global and local search methods to improve quality and efficiency">DRIFT 搜索简介：结合全局和局部搜索方法提高质量和效率<span class="glyph-append glyph-append-chevron-right glyph-append-xsmall"></span></a></li></ul></div><p><strong>您可以在<a class="msr-external-link glyph-append glyph-append-open-in-new-tab glyph-append-xsmall" href="https://github.com/microsoft/graphrag">GraphRAG GitHub 存储库<span class="sr-only">（在新选项卡中打开）</span></a>上尝试动态全局搜索。 <span data-contrast="auto" xml:lang="EN-US" lang="EN-US" class="TextRun EmptyTextRun SCXW249363172 BCX8" style="-webkit-user-drag: none; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; user-select: text; font-size: 12pt; line-height: 20.7px; font-family: Aptos, Aptos_EmbeddedFont, Aptos_MSFontService, sans-serif; font-variant-ligatures: none !important;"></span></strong></p><p>动态全局搜索是正在探索的 GraphRAG 几项主要优化中的第二项。如果您对本地问题的优化感兴趣，请查看我们最近关于<a href="https://www.microsoft.com/en-us/research/blog/introducing-drift-search-combining-global-and-local-search-methods-to-improve-quality-and-efficiency/" target="_blank" rel="noreferrer noopener">DRIFT 搜索</a>的博客文章。请继续关注我们即将开展的工作，我们将探索一种完全不同的图形支持 RAG 方法，该方法显着提高成本效益，同时提高本地和全局问题的答案质量。</p><div style="height:30px" aria-hidden="true" class="wp-block-spacer"></div><span id="label-external-link" class="sr-only" aria-hidden="true">在新选项卡中打开</span><p><a href="https://www.microsoft.com/en-us/research/blog/graphrag-improving-global-search-via-dynamic-community-selection/">GraphRAG：通过动态社区选择改进全局搜索</a>一文首先出现在<a href="https://www.microsoft.com/en-us/research">Microsoft Research</a>上。</p> ]]>;</content:encoded></item><item><title> Orca-AgentInstruct：代理流可以成为有效的合成数据生成器</title><link/>https://www.microsoft.com/en-us/research/blog/orca-agentinstruct-agentic-flows-can-be- effective-synthetic-data-generators/<dc:creator><![CDATA[Brenda Potts]]></dc:creator><pubDate> Thu, 14 Nov 2024 17:00:00 +0000</pubDate><category><![CDATA[Research Blog]]></category><guid ispermalink="false"> https://www.microsoft.com/en-us/research/?p=1063530 </guid><description><![CDATA[<p>来自 Microsoft Research 的 Orca-AgentInstruct 可以大规模生成多样化的高质量合成数据，以便对基础 LLM 进行后期训练和微调，以扩展功能、持续学习和提高性能。</p><p> <a href="https://www.microsoft.com/en-us/research/blog/orca-agentinstruct-agentic-flows-can-be-effective-synthetic-data-generators/">Orca-AgentInstruct 帖子：代理流可以是有效的合成数据生成器</a>首先出现在<a href="https://www.microsoft.com/en-us/research">Microsoft Research</a>上。</p> ]]>; </description><content:encoded><![CDATA[
<figure class="wp-block-image size-full"><img decoding="async" width="1400" height="788" src="https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3-2024-BlogHeroFeature-1400x788-1.jpg" alt="Orca-3 博客 - 抽象波浪图" class="wp-image-1063551" srcset="https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3-2024-BlogHeroFeature-1400x788-1.jpg 1400w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3-2024-BlogHeroFeature-1400x788-1-300x169.jpg 300w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3-2024-BlogHeroFeature-1400x788-1-1024x576.jpg 1024w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3-2024-BlogHeroFeature-1400x788-1-768x432.jpg 768w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3-2024-BlogHeroFeature-1400x788-1-1066x600.jpg 1066w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3-2024-BlogHeroFeature-1400x788-1-655x368.jpg 655w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3-2024-BlogHeroFeature-1400x788-1-240x135.jpg 240w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3-2024-BlogHeroFeature-1400x788-1-640x360.jpg 640w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3-2024-BlogHeroFeature-1400x788-1-960x540.jpg 960w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3-2024-BlogHeroFeature-1400x788-1-1280x720.jpg 1280w" sizes="(max-width: 1400px) 100vw, 1400px" /></figure><p>我们在<a href="https://www.microsoft.com/en-us/research/publication/orca-progressive-learning-from-complex-explanation-traces-of-gpt-4/" target="_blank" rel="noreferrer noopener">Orca</a>和<a href="https://www.microsoft.com/en-us/research/blog/orca-2-teaching-small-language-models-how-to-reason/" target="_blank" rel="noreferrer noopener">Orca 2</a>上的工作证明了使用合成数据对小型语言模型进行后期训练的强大功能，并使它们达到以前只有在更大的语言模型中才能找到的性能水平。 Orca-AgentInstruct 是朝这个方向迈出的又一步，我们探索使用代理流来大规模生成多样化的高质量数据。 Orca-AgentInstruct 是一种用于生成合成数据的代理解决方案。通过利用代理框架，AgentInstruct 可以从原始数据源生成定制数据集，包括提示和响应，为构建用于模型微调的合成数据工厂铺平道路。</p><p>通过微调基础 Mistral 70 亿参数模型并使用 AgentInstruct 生成 2500 万对数据集，观察到的显着改进证明了该方法的有效性。经过微调的模型（我们称为 Orca-3-Mistral）在多个基准测试中展示了显着的性能提升。例如，它显示 AGIEval 提高了 40%，MMLU 提高了 19%，GSM8K 提高了 54%，BBH 提高了 38%，AlpacaEval 提高了 45%，多个汇总基准的不准确或不可靠结果减少了 31.34%。</p><p>我们正在公开该数据集的 100 万对子集 ( <a class="msr-external-link glyph-append glyph-append-open-in-new-tab glyph-append-xsmall" href="https://huggingface.co/datasets/microsoft/orca-agentinstruct-1M-v1" target="_blank" rel="noreferrer noopener">orca-agentinstruct-1M</a> )，以及描述数据生成过程的<a href="https://www.microsoft.com/en-us/research/publication/agentinstruct-toward-generative-teaching-with-agentic-flows/" target="_blank" rel="noreferrer noopener">报告</a>，以鼓励对合成数据生成和语言模型微调的研究。 </p><figure class="wp-block-image aligncenter size-full"><img loading="lazy" decoding="async" width="3300" height="1320" src="https://www.microsoft.com/en-us/research/uploads/prod/2024/08/Figure-1-1.png" alt="比较 Mistral-Instruct-7B 模型和 Mistral-7B 训练后 AgentInstruct 数据 (Orca-3) 分数的条形图。基准测试包括 AGIEval、MMLU、BBH、GSM8K、AlpaceEval、FOFO 和 Mirage-RAG。该图显示了使用 AgentInstruct 数据微调的模型在不同基准测试中的显着改进。" class="wp-image-1063923" srcset="https://www.microsoft.com/en-us/research/uploads/prod/2024/08/Figure-1-1.png 3300w, https://www.microsoft.com/en-us/research/uploads/prod/2024/08/Figure-1-1-300x120.png 300w, https://www.microsoft.com/en-us/research/uploads/prod/2024/08/Figure-1-1-1024x410.png 1024w, https://www.microsoft.com/en-us/research/uploads/prod/2024/08/Figure-1-1-768x307.png 768w, https://www.microsoft.com/en-us/research/uploads/prod/2024/08/Figure-1-1-1536x614.png 1536w, https://www.microsoft.com/en-us/research/uploads/prod/2024/08/Figure-1-1-2048x819.png 2048w, https://www.microsoft.com/en-us/research/uploads/prod/2024/08/Figure-1-1-240x96.png 240w" sizes="(max-width: 3300px) 100vw, 3300px" /><figcaption class="wp-element-caption">图 1：使用 AgentInstruct 对 Mistral-7B 进行后训练的效果。 </figcaption></figure><figure class="wp-block-image aligncenter size-full"><img loading="lazy" decoding="async" width="1661" height="498" src="https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3_Figure-2.png" alt="该图显示了 AgentInstruct 中使用的三个流程： 1) 内容转换流程将原始种子转换为中间表示，从而简化了针对特定目标定制的指令的创建。 2) 种子指令生成流，包括多个代理，将来自内容转换流的转换后的种子作为输入，并生成一组不同的指令。 3) 指令细化流程将来自种子指令流程的指令作为输入，并迭代地增强其复杂性和质量。" class="wp-image-1063545" srcset="https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3_Figure-2.png 1661w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3_Figure-2-300x90.png 300w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3_Figure-2-1024x307.png 1024w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3_Figure-2-768x230.png 768w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3_Figure-2-1536x461.png 1536w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/Orca-3_Figure-2-240x72.png 240w" sizes="(max-width: 1661px) 100vw, 1661px" /><figcaption class="wp-element-caption">图 2。该图提供了不同代理组所扮演的角色的主题概述。内容转换流将种子转换为中间表示形式，从而更轻松地创建高质量和多样化的数据。种子指令生成流程按照分类法创建目标任务的实例。指令细化流程通过从这些初始数据点开始并探索邻域来进一步探索空间。我们期望通过选择随机种子，我们将能够覆盖整个数据点区域。</figcaption></figure><p><strong>合成数据加速了 LLM 的开发：</strong>在过去的一年里，合成数据的使用极大地推进了大型语言模型 (LLM) 的训练。它加速了各个阶段的模型训练，从预训练（例如，Phi-3）到指令调整（例如，Orca 和 WizardLM）以及根据人类反馈进行强化学习（例如，直接纳什优化）。 <span data-contrast="auto" xml:lang="EN-US" lang="EN-US" class="TextRun EmptyTextRun SCXW48469235 BCX8" style="-webkit-user-drag: none; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; user-select: text; font-size: 11pt; line-height: 18.3458px; font-family: Aptos, Aptos_EmbeddedFont, Aptos_MSFontService, sans-serif; font-weight: bold; font-variant-ligatures: none !important;"></span></p><div class="annotations " data-bi-aN="margin-callout"><ul class="annotations__list card depth-16 bg-body p-4 annotations__list--left"><li class="annotations__list-item"> <a href="https://www.microsoft.com/en-us/research/video/agentinstruct-methodology/" target="_blank" aria-label="AgentInstruct Methodology" data-bi-type="annotated-link" data-bi-cN="AgentInstruct Methodology" class="annotations__list-thumbnail" ><img loading="lazy" decoding="async" width="172" height="96" src="https://www.microsoft.com/en-us/research/uploads/prod/2024/07/j-hYRmUUbLU-240x135.jpg" class="mb-2" alt="特工指示视频缩略图" srcset="https://www.microsoft.com/en-us/research/uploads/prod/2024/07/j-hYRmUUbLU-240x135.jpg 240w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/j-hYRmUUbLU-300x169.jpg 300w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/j-hYRmUUbLU-1024x576.jpg 1024w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/j-hYRmUUbLU-768x432.jpg 768w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/j-hYRmUUbLU-1066x600.jpg 1066w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/j-hYRmUUbLU-655x368.jpg 655w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/j-hYRmUUbLU-640x360.jpg 640w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/j-hYRmUUbLU-960x540.jpg 960w, https://www.microsoft.com/en-us/research/uploads/prod/2024/07/j-hYRmUUbLU.jpg 1280w" sizes="(max-width: 172px) 100vw, 172px" /></a> <span class="annotations__type d-block text-uppercase font-weight-semibold text-neutral-300 small">演示视频</span><a href="https://www.microsoft.com/en-us/research/video/agentinstruct-methodology/" target="_blank" class="annotations__link font-weight-semibold text-decoration-none" data-bi-type="annotated-link" aria-label="AgentInstruct Methodology" data-bi-aN="margin-callout" data-bi-cN="AgentInstruct Methodology">AgentInstruct 方法<span class="glyph-append glyph-append-chevron-right glyph-append-xsmall"></span></a></li></ul></div><p><strong>生成高质量的合成数据很困难：</strong>另一方面，研究表明，对其他模型生成的合成数据进行预训练模型可能会导致模型崩溃，导致模型逐渐退化。对于使用合成数据进行后期训练也提出了类似的担忧，这表明这可能会导致模仿过程，训练后的模型只学习风格特征而不是实际能力。 <span data-contrast="auto" xml:lang="EN-US" lang="EN-US" class="TextRun EmptyTextRun SCXW155638626 BCX8" style="-webkit-user-drag: none; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; user-select: text; font-size: 11pt; line-height: 18.3458px; font-family: Aptos, Aptos_EmbeddedFont, Aptos_MSFontService, sans-serif; font-variant-ligatures: none !important;"></span></p><p>这种差异可能归因于生成高质量和多样化的合成数据的挑战。  合成数据的成功使用需要大量的人力来整理和过滤数据以确保高质量。</p><p><strong>合成数据遇见代理：</strong>我们在过去一年见证的另一个重大发展是代理（尤其是多代理）工作流程的兴起，例如 AutoGen。代理工作流程可以生成高质量的数据，这超越了底层法学硕士的能力，通过使用具有反射和迭代的流程，使代理能够回顾解决方案、提出批评并改进解决方案。他们还可以使用搜索 API、计算器和代码解释器等工具来解决 LLM 限制。</p><p>多代理工作流程还带来了额外的好处，例如模拟我们可以生成新提示和相应响应的场景。它们还实现了数据生成工作流程的自动化，减少或消除了对某些任务不必要的人工干预的需要。</p><p> <strong>AgentInstruct：</strong>生成用于训练后或微调的合成数据通常依赖于现有的提示集，该提示集可以按原样使用，也可以用作生成更多指令的种子。在这项工作中，我们将问题设置概括为更广泛的目标，即生成大量多样化、具有挑战性的高质量数据，以向人工智能模型教授特定技能。我们将这种设置称为<em>生成式教学</em>。</p><p> AgentInstruct 是生成式教学的代理解决方案。 AgentInstruct 使用原始文档作为输入来创建演示和反馈数据。当通用数据用作种子时，AgentInstruct 可用于教授法学硕士一般能力，例如写作、推理或检索增强生成 (RAG)。特定领域的数据（例如零售或金融）也可以用作种子来改进特定专业领域的模型。 AgentInstruct 可以创建：</p><ol class="wp-block-list"><li><strong>高质量数据：</strong> AgentInstruct 使用 GPT-4 并结合搜索和代码解释器等工具来创建高质量数据。</li><li><strong>多样化的数据：</strong> AgentInstruct 使用一组专业代理（具有强大的 LLM、工具和反射流）和分类法（超过 100 个子类别）创建提示和响应，确保多样性和质量。</li><li><strong>大数据量：</strong> AgentInstruct可以自主运行。和 applyiflows 用于验证和数据过滤。它不需要种子提示并使用原始文档进行种子。</li></ol><p>使用原始数据作为种子有两个优点：它数量充足，允许 AgentInstruct 生成大规模且多样化的数据集；它鼓励学习通用技能，而不是通过避免使用现有提示来学习特定于基准的技能。 </p><div class="border-bottom border-top border-gray-300 mt-5 mb-5 msr-promo text-center text-md-left alignwide" data-bi-aN="promo" data-bi-id="1085526"><p class="msr-promo__label text-gray-800 text-center text-uppercase"><span class="px-4 bg-white display-inline-block font-weight-semibold small">微软研究播客</span></p><div class="row pt-3 pb-4 align-items-center"><div class="msr-promo__media col-12 col-md-5"> <a class="bg-gray-300" href="https://www.microsoft.com/en-us/research/podcast/whats-your-story-lex-story/" aria-label="What’s Your Story: Lex Story" data-bi-cN="What’s Your Story: Lex Story" target="_blank"><img decoding="async" class="w-100 display-block" src="https://www.microsoft.com/en-us/research/uploads/prod/2024/08/Lex-Story_WYS_Hero_Feature_1400x788.jpg" alt="Microsoft Research 播客“What&#39;s Your Story”节目中 Lex Story 的照片" /></a></div><div class="msr-promo__content p-3 px-5 col-12 col-md"><h2 class="h4">你的故事是什么：莱克斯的故事</h2><p class="large">模型制作者和制造者 Lex Story 通过原型制作帮助将研究变为现实。他讨论了他对失败的看法；支持他追求艺术和科学的鼓励和建议；以及可能激发他下一步职业发展的休假。 </p><div class="wp-block-buttons justify-content-center justify-content-md-start"><div class="wp-block-button"> <a href="https://www.microsoft.com/en-us/research/podcast/whats-your-story-lex-story/" class="btn btn-brand glyph-append glyph-append-chevron-right" aria-label="Listen now" data-bi-cN="What’s Your Story: Lex Story" target="_blank">现在听</a></div></div></div><!--/.msr-promo__content--></div><!--/.msr-promo__inner-wrap--><span id="label-external-link" class="sr-only" aria-hidden="true">在新选项卡中打开</span></div><!--/.msr-promo--><p>我们预计代理流在整个模型训练生命周期中变得越来越重要，包括训练前、训练后和专业化，并最终支持创建用于模型定制和持续改进的合成数据工厂。通过使高质量的模型训练更加高效和易于访问，这有可能推动多个行业的人工智能进步。</p><h2 class="wp-block-heading" id="contributors">贡献者：</h2><p> <a href="https://www.microsoft.com/en-us/research/people/armitra/" target="_blank" rel="noreferrer noopener">Arindam Mitra</a> 、Luciano Del Corro、 <a href="https://www.microsoft.com/en-us/research/people/zheng/" target="_blank" rel="noreferrer noopener">郑国庆</a>、 <a href="https://www.microsoft.com/en-us/research/people/shmahaj/" target="_blank" rel="noreferrer noopener">Shweti Mahajan</a> 、 <a href="https://www.microsoft.com/en-us/research/people/danyr/" target="_blank" rel="noreferrer noopener">Dany Rouhana</a> 、 <a href="https://www.microsoft.com/en-us/research/people/andrescodas/" target="_blank" rel="noreferrer noopener">Andres Codas</a> 、亚东、陈伟革、 <a href="https://www.microsoft.com/en-us/research/people/olvrousg/" target="_blank" rel="noreferrer noopener">Olga Vrousgou</a> 、 <a href="https://www.microsoft.com/en-us/research/people/corbyrosset/" target="_blank" rel="noreferrer noopener">Corby Rosset</a> 、Fillipe Silva、 <a href="https://www.microsoft.com/en-us/research/people/hakhanpo/" target="_blank" rel="noreferrer noopener">Hamed Khanpour</a> 、 <a href="https://www.microsoft.com/en-us/research/people/yashlara/" target="_blank" rel="noreferrer noopener">Yash Lara</a>和<a href="https://www.microsoft.com/en-us/research/people/hassanam/" target="_blank" rel="noreferrer noopener">Ahmed Awadallah</a></p><span id="label-external-link" class="sr-only" aria-hidden="true">在新选项卡中打开</span><p><a href="https://www.microsoft.com/en-us/research/blog/orca-agentinstruct-agentic-flows-can-be-effective-synthetic-data-generators/">Orca-AgentInstruct 帖子：代理流可以是有效的合成数据生成器</a>首先出现在<a href="https://www.microsoft.com/en-us/research">Microsoft Research</a>上。</p> ]]>;</content:encoded></item></channel></rss>